<!DOCTYPE html>
<html>
<head>
    <title>Check User Courses</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .info { background: #e3f2fd; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .result { background: #f5f5f5; padding: 15px; border-radius: 5px; margin-top: 20px; }
        pre { background: #fff; padding: 10px; border: 1px solid #ddd; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Kiểm tra Courses theo User ID</h1>
    
    <div class="info">
        <h3>Hướng dẫn:</h3>
        <ol>
            <li>Mở Developer Tools (F12) → Console</li>
            <li>Kiểm tra localStorage để xem user đang đăng nhập</li>
            <li>Nhập teacher_id vào ô bên dưới và click "Test API"</li>
        </ol>
    </div>
    
    <div>
        <label>Teacher ID:</label>
        <input type="number" id="teacherId" value="2" />
        <button onclick="testAPI()">Test API</button>
    </div>
    
    <div class="result" id="result"></div>
    
    <script>
        // Lấy user từ localStorage
        const userStr = localStorage.getItem('user');
        if (userStr) {
            try {
                const user = JSON.parse(userStr);
                document.getElementById('result').innerHTML = `
                    <h3>User đang đăng nhập:</h3>
                    <pre>${JSON.stringify(user, null, 2)}</pre>
                    <p><strong>User ID:</strong> ${user.id}</p>
                    <p><strong>Username:</strong> ${user.username}</p>
                    <p><strong>Role:</strong> ${user.role}</p>
                `;
            } catch (e) {
                document.getElementById('result').innerHTML = '<p style="color: red;">Lỗi parse user data</p>';
            }
        } else {
            document.getElementById('result').innerHTML = '<p style="color: orange;">Chưa đăng nhập</p>';
        }
        
        async function testAPI() {
            const teacherId = document.getElementById('teacherId').value;
            const resultDiv = document.getElementById('result');
            
            resultDiv.innerHTML = '<p>Đang tải...</p>';
            
            try {
                const response = await fetch(`http://localhost:8000/api/get-courses.php?teacher_id=${teacherId}`);
                const data = await response.json();
                
                resultDiv.innerHTML = `
                    <h3>Kết quả API (teacher_id = ${teacherId}):</h3>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                    <p><strong>Tổng số courses:</strong> ${data.total || 0}</p>
                `;
            } catch (error) {
                resultDiv.innerHTML = `<p style="color: red;">Lỗi: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>

